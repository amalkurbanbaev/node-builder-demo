import{m as F,r as s}from"./index-COjP6dgS.js";var N,G;function re(){if(G)return N;G=1;var n="Expected a function",r=NaN,c="[object Symbol]",f=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,d=/^0o[0-7]+$/i,w=parseInt,E=typeof F=="object"&&F&&F.Object===Object&&F,R=typeof self=="object"&&self&&self.Object===Object&&self,$=E||R||Function("return this")(),j=Object.prototype,t=j.toString,a=Math.max,L=Math.min,y=function(){return $.Date.now()};function X(e,i,g){var S,p,O,h,u,b,T=0,A=!1,C=!1,z=!0;if(typeof e!="function")throw new TypeError(n);i=M(i)||0,k(g)&&(A=!!g.leading,C="maxWait"in g,O=C?a(M(g.maxWait)||0,i):O,z="trailing"in g?!!g.trailing:z);function _(o){var m=S,I=p;return S=p=void 0,T=o,h=e.apply(I,m),h}function Y(o){return T=o,u=setTimeout(x,i),A?_(o):h}function Z(o){var m=o-b,I=o-T,q=i-m;return C?L(q,O-I):q}function B(o){var m=o-b,I=o-T;return b===void 0||m>=i||m<0||C&&I>=O}function x(){var o=y();if(B(o))return J(o);u=setTimeout(x,Z(o))}function J(o){return u=void 0,z&&S?_(o):(S=p=void 0,h)}function V(){u!==void 0&&clearTimeout(u),T=0,S=b=p=u=void 0}function ee(){return u===void 0?h:J(y())}function D(){var o=y(),m=B(o);if(S=arguments,p=this,b=o,m){if(u===void 0)return Y(b);if(C)return u=setTimeout(x,i),_(b)}return u===void 0&&(u=setTimeout(x,i)),h}return D.cancel=V,D.flush=ee,D}function k(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function K(e){return!!e&&typeof e=="object"}function Q(e){return typeof e=="symbol"||K(e)&&t.call(e)==c}function M(e){if(typeof e=="number")return e;if(Q(e))return r;if(k(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=k(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(f,"");var g=l.test(e);return g||d.test(e)?w(e.slice(2),g?2:8):v.test(e)?r:+e}return N=X,N}re();var U=typeof window<"u"?s.useLayoutEffect:s.useEffect;function H(n,r,c,f){const v=s.useRef(r);U(()=>{v.current=r},[r]),s.useEffect(()=>{const l=window;if(!(l&&l.addEventListener))return;const d=w=>{v.current(w)};return l.addEventListener(n,d,f),()=>{l.removeEventListener(n,d,f)}},[n,c,f])}function P(n){const r=s.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return U(()=>{r.current=n},[n]),s.useCallback((...c)=>{var f;return(f=r.current)==null?void 0:f.call(r,...c)},[r])}var W=typeof window>"u";function te(n,r,c={}){const{initializeWithValue:f=!0}=c,v=s.useCallback(t=>c.serializer?c.serializer(t):JSON.stringify(t),[c]),l=s.useCallback(t=>{if(c.deserializer)return c.deserializer(t);if(t==="undefined")return;const a=r instanceof Function?r():r;let L;try{L=JSON.parse(t)}catch(y){return console.error("Error parsing JSON:",y),a}return L},[c,r]),d=s.useCallback(()=>{const t=r instanceof Function?r():r;if(W)return t;try{const a=window.localStorage.getItem(n);return a?l(a):t}catch(a){return console.warn(`Error reading localStorage key “${n}”:`,a),t}},[r,n,l]),[w,E]=s.useState(()=>f?d():r instanceof Function?r():r),R=P(t=>{W&&console.warn(`Tried setting localStorage key “${n}” even though environment is not a client`);try{const a=t instanceof Function?t(d()):t;window.localStorage.setItem(n,v(a)),E(a),window.dispatchEvent(new StorageEvent("local-storage",{key:n}))}catch(a){console.warn(`Error setting localStorage key “${n}”:`,a)}}),$=P(()=>{W&&console.warn(`Tried removing localStorage key “${n}” even though environment is not a client`);const t=r instanceof Function?r():r;window.localStorage.removeItem(n),E(t),window.dispatchEvent(new StorageEvent("local-storage",{key:n}))});s.useEffect(()=>{E(d())},[n]);const j=s.useCallback(t=>{t.key&&t.key!==n||E(d())},[n,d]);return H("storage",j),H("local-storage",j),[w,R,$]}export{te as u};
